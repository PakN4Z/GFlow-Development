"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3030],{69454:function(e,r,n){n.d(r,{y:function(){return s}});var t=n(83156),o=n(33520),i=n(37543),d=n(69830),a=n(16692),l=n(50543),u=n(68409),c=n(27484),v=n.n(c);let s=async e=>{var r,n,c,s,_,f;let m=await (0,t.$6)({query:i.t,variables:{wherePageCreateInvoiceOrder:{id:{_eq:e},deleted_at:{_is_null:!0},Client:{deleted_at:{_is_null:!0}}},whereOrderItem:{product_id:{_is_null:!1},deleted_at:{_is_null:!0}},whereOrderWithSuffix:{generated_order_items_pdf_suffix:{_is_null:!1}},orderByOrderWithSuffix:{generated_order_items_pdf_suffix:"desc"},limitOrderWithSuffix:1}}),g=null==m?void 0:null===(r=m.orderWithSuffix)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.generated_order_items_pdf_suffix,p=(0,u.c)({type:"order",serialNumber:(g||0)+1}),I=null==m?void 0:null===(c=m.order)||void 0===c?void 0:null===(s=c[0])||void 0===s?void 0:s.Client,{totalAmountWithVat:O,totalVat:h}=(0,o.o)({orderData:m}),y=null===(_=null==m?void 0:null===(f=m.order)||void 0===f?void 0:f.flatMap(e=>null==e?void 0:e.OrderItems))||void 0===_?void 0:_.filter(e=>null==e?void 0:e.product_ref),P=[],S=(y||[]).map(e=>{var r,n,t,o,i;let l=((null==e?void 0:e.product_price)||0)*((null==e?void 0:e.product_quantity)||0),u=(null==e?void 0:null===(r=e.Product)||void 0===r?void 0:r.vat)===a.ZF.withPvm,c=(null==e?void 0:null===(n=e.Product)||void 0===n?void 0:null===(t=n.UnitOfMeasure)||void 0===t?void 0:t.unit_of_measure_value)||"",v=l*(100-((null==e?void 0:e.client_product_discount)||0))/100,s=+((null==e?void 0:null===(o=e.Product)||void 0===o?void 0:null===(i=o.UnitOfMeasure)||void 0===i?void 0:i.fraction)||0);return P.push({quantity:(null==e?void 0:e.product_quantity)||0,ref:(null==e?void 0:e.product_ref)||"",series:(null==e?void 0:e.product_lot)||""}),{I07_TIPAS:d.lM,I07_SERIJA:(null==e?void 0:e.product_lot)||"",I07_KODAS:(null==e?void 0:e.product_ref)||"",I07_PAV:(null==e?void 0:e.product_name)||"",I07_KIEKIS:((null==e?void 0:e.product_quantity)||0)*s,I07_ALT_KIEKIS:((null==e?void 0:e.product_quantity)||0)*s,I07_KAINA_BE:l,I07_KAINA_SU:u?1.21*l:l,I07_PVM:u?.21*v:0,I07_NUOLAIDA:(null==e?void 0:e.client_product_discount)||0,I07_SUMA:v,I07_KODAS_US:c,I07_KODAS_US_P:c,I07_KODAS_US_A:c,I07_FRAKCIJA:s,I07_ALT_FRAK:s,I07_KODAS_IS:d.gC}}),A={I06_DOK_NR:p,I06_OP_DATA:v()().toDate(),I06_KODAS_KS:(null==I?void 0:I.rivile_client_id)||"",I06_ADR:(null==I?void 0:I.address)||"",I06_PAV:null==I?void 0:I.company_name,I06_SUMA:+O.toFixed(2),I06_SUMA_PVM:+h.toFixed(2),I06_OP_TIP:l.w2.saleReservation,I06_PASTABOS:"".concat(e),I07:S};return{productsToCheck:P,documentValues:A}}},53596:function(e,r,n){n.d(r,{o:function(){return o}});var t=n(4004);let o={save:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"common:::save"))||""},cancel:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"common:::cancel"))||""},fieldRequired:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"common:::fieldRequired"))||""},toastError:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"common:::Toast::errorMsg"))||""},toastSuccess:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"modals-and-forms:::FormUpdateOrderStatus::toastSuccess"))||""},toastQualityCheckError:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"modals-and-forms:::FormEditOrderStatus::Toast::toastQualityCheckErr"))||""},validationMaxLength:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"modals-and-forms:::FormUpdateOrder::maxLength"))||""},editOrder:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"modals-and-forms:::FormUpdateOrder::editOrder"))||""},trackingNumber:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"modals-and-forms:::FormUpdateOrder::trackingNumber"))||""},toastUpdateTrackingNoSuccess:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"modals-and-forms:::FormUpdateOrder::Toast::success"))||""},productsMissingQuantityError:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"modals-and-forms:::FormUpdateOrder::Toast::productsMissingQuantityError"))||""},complementedProductsError:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"modals-and-forms:::FormUpdateOrder::Toast::complementedProductsError"))||""},emailsSentError:()=>{var e;return(null===t.ag||void 0===t.ag?void 0:null===(e=t.ag.t)||void 0===e?void 0:e.call(t.ag,"modals-and-forms:::FormUpdateOrder::Toast::emailsSentError"))||""}}},33520:function(e,r,n){n.d(r,{o:function(){return o}});var t=n(16692);let o=e=>{let{orderData:r}=e,n=0,o=0,i=0;if(r){var d;let a=null==r?void 0:null===(d=r.order)||void 0===d?void 0:d.flatMap(e=>(null==e?void 0:e.OrderItems)||[]);a&&(null==a?void 0:a.length)&&(null==a||a.forEach(e=>{var r,d;let a=((null==e?void 0:e.product_price)||0)*(100-((null==e?void 0:e.client_product_discount)||0))/100,l=a+(a||0)*((null==e?void 0:null===(r=e.Product)||void 0===r?void 0:r.vat)===t.ZF.withPvm?21:0)/100,u=l*((null==e?void 0:e.product_quantity)||0),c=a*((null==e?void 0:e.product_quantity)||0);if(n+=c,o+=u,(null==e?void 0:null===(d=e.Product)||void 0===d?void 0:d.vat)===t.ZF.withPvm){let v=.21*((null==e?void 0:e.product_price)||0),s=v*((null==e?void 0:e.product_quantity)||0)*((100-((null==e?void 0:e.client_product_discount)||0))/100);i+=s}}))}return{totalAmountWithVat:o,totalAmount:n,totalVat:i}}},37543:function(e,r,n){n.d(r,{t:function(){return a}});var t=n(7297),o=n(91189);function i(){let e=(0,t.Z)(["\n  query GetPageCreateInvoiceOrderGqlQuery(\n    $wherePageCreateInvoiceOrder: order_bool_exp\n    $orderByPageCreateInvoiceOrder: [order_order_by!]\n    $limitPageCreateInvoiceOrder: Int\n    $offsetPageCreateInvoiceOrder: Int\n    $whereOrderItem: order_item_bool_exp\n    $whereOrderWithSuffix: order_bool_exp\n    $limitOrderWithSuffix: Int\n    $orderByOrderWithSuffix: [order_order_by!]\n  ) {\n    order(\n      where: $wherePageCreateInvoiceOrder\n      order_by: $orderByPageCreateInvoiceOrder\n      limit: $limitPageCreateInvoiceOrder\n      offset: $offsetPageCreateInvoiceOrder\n    ) {\n      id\n      client_id\n      department\n      creator_editor_user_id\n      department\n      uuid\n      generated_order_items_pdf_prefix\n      generated_order_items_pdf_suffix\n\n      Employee {\n        email\n      }\n\n      CreatorEditor {\n        name_surname\n        phone\n      }\n\n      Client {\n        id\n        company_name\n        company_code\n        address\n        country\n        accounting_email\n        phone\n        rivile_client_id\n        uuid\n      }\n      OrderItems(where: $whereOrderItem) {\n        order_id\n        product_ref\n        product_lot\n        product_name\n        Product {\n          vat\n          ref\n\n          UnitOfMeasure {\n            fraction\n            unit_of_measure_value\n          }\n        }\n\n        Client {\n          company_code\n          address\n          phone\n        }\n        product_price\n        client_product_discount\n        product_quantity\n      }\n    }\n\n    orderWithSuffix: order(\n      where: $whereOrderWithSuffix\n      order_by: $orderByOrderWithSuffix\n      limit: $limitOrderWithSuffix\n    ) {\n      generated_order_items_pdf_suffix\n    }\n\n    order_aggregate(where: $wherePageCreateInvoiceOrder) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return i=function(){return e},e}function d(){let e=(0,t.Z)(["\n  query GetPageCreateInvoiceGqlQuery(\n    $wherePageCreateInvoice: invoice_bool_exp\n    $orderByPageCreateInvoice: [invoice_order_by!]\n    $limitPageCreateInvoice: Int\n    $offsetPageCreateInvoice: Int\n  ) {\n    invoice(\n      where: $wherePageCreateInvoice\n      order_by: $orderByPageCreateInvoice\n      limit: $limitPageCreateInvoice\n      offset: $offsetPageCreateInvoice\n    ) {\n      id\n    }\n\n    invoice_aggregate(where: $wherePageCreateInvoice) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return d=function(){return e},e}let a=(0,o.ZP)(i());(0,o.ZP)(d())},94461:function(e,r,n){n.d(r,{d:function(){return i}});var t=n(33255),o=n(655);let i=async e=>{try{let r=await (0,t.Z)().post(o.MF["rivile/check-product-quantity"],e);return null==r?void 0:r.data}catch(n){return console.error("RivileCheckProductQuantityApiQuery > error",null==n?void 0:n.toString()),n}}},18058:function(e,r,n){n.d(r,{e:function(){return i}});var t=n(33255),o=n(655);let i=async e=>{try{let r=await (0,t.Z)().post(o.MF["rivile/create-purchase-sale-document"],e);return null==r?void 0:r.data}catch(n){return console.error("RivileCreatePurchaseSaleDocumentApiQuery > error",null==n?void 0:n.toString()),n}}},50543:function(e,r,n){var t,o,i,d,a,l,u,c,v,s,_,f,m,g,p,I,O,h;n.d(r,{Mi:function(){return o},Ui:function(){return u},fI:function(){return l},qM:function(){return t},w2:function(){return v},wI:function(){return a}}),(s=t||(t={})).legal="1",s.physical="2",(_=o||(o={})).product="1",_.service="2",(f=i||(i={})).A="1",f.B="2",f.C="3",f.D="4",(m=d||(d={})).no="0",m.yes="1",(g=a||(a={})).product="PREKES",g.service="PASLAUGOS",g.material="MEDZIAGA",(p=l||(l={}))[p.simple=1]="simple",p[p.complemented=2]="complemented",p[p.decomposed=3]="decomposed",p[p.forGeneration=4]="forGeneration",p[p.composite=5]="composite",p[p.complementedDecomposed=6]="complementedDecomposed",p[p.mixed=7]="mixed",p[p.tare=8]="tare",(I=u||(u={})).no="0",I.yes="1",(O=c||(c={}))[O.notTransferred=1]="notTransferred",O[O.transferred=2]="transferred",O[O.corrected=3]="corrected",(h=v||(v={}))[h.purchaseBillOfLading=1]="purchaseBillOfLading",h[h.purchaseReturn=2]="purchaseReturn",h[h.purchaseOrder=3]="purchaseOrder",h[h.purchaseOffer=4]="purchaseOffer",h[h.saleBillOfLading=51]="saleBillOfLading",h[h.saleReturn=52]="saleReturn",h[h.saleOrder=53]="saleOrder",h[h.saleReservation=54]="saleReservation",h[h.saleOffer=55]="saleOffer"},68409:function(e,r,n){n.d(r,{c:function(){return o}});var t=n(16692);let o=e=>{let r="",n=Math.trunc(e.serialNumber).toFixed(0).padStart(7,"0");return("order"===e.type?t.o_.cnc:"#")+n}}}]);